- var title = '作业模块';
- var navIndex = 4;

doctype html
include components/head
.container
    include ../components/topbar
    include components/nav
    .wrapper.col3
        #container
            #content(style='height: 350px;')
                h1 #{section}班级作业提交
                table(summary='Summary Here', cellpadding='0', cellspacing='0')
                    thead
                        tr
                            th 提交编号
                            th 作业文件
                            th 提交者
                            th 提交日期
                            th 操作
                    tbody
                        each item, index in homeworks
                            tr.sub-item(class= (index%2==0) ? 'dark' : 'light')
                                td= index+1
                                td= item.name
                                td.stu= item.stu_id
                                td= item.submit_time.toLocaleString()
                                td
                                    button.download 下载
                                    if item.name.includes('.pdf')
                                        button.preview 预览
                                    button.correct 批改
            #column
                .subnav(style='position: fixed;')
                    h2 作业模块
                    ul
                        li
                            a(href='../list') 作业列表
                        li
                            a(href='../correct') 作业批改
                        li
                            a(href='../duplicate') 作业查重
            .clear
            <script src="/jquery-3.1.1.js"></script>
            script.
                $('.sub-item').each(function(e) {
                    var correct = $(e).find('.correct');
                    var stuID = $(e).find('.stu').html();
                    correct.click(function() {
                        var scoreTmp = window.promot("请输入分数");
                        var comment = window.promot("请输入评价");
                        var score = parseInt(scoreTmp);
                        if (isNaN(score)|| score > 100 || score < 0) {
                            alert('请输入正确的分数！');
                            return;
                        } else {
                            $.post('', {
                                score: score,
                                comment: comment,
                                stuID: stuID
                            }, function(data) {
                                alert(data.msg);
                                if (data.msg == 1) {
                                    window.location.reload();
                                }
                            })
                        }
                    })
                })
    include ../components/footer